/*! JaSper v3.5 | (c) 2015 José M. Carnero (sargazos.net) | JaSper_rtb v1.2 */
JaSper.extend(JaSper.langs,{es:{"Background Color":"Color de fondo",Bold:"Negrita","Center Align":"Centrado","Font Size":"Tamaño de fuente","Font Family":"Fuente","Font Format":"Formato de fuente","Foreground Color":"Color","Horizontal Rule":"Línea horizontal",Image:"Imagen","Indent Text":"Indentar",Italic:"Cursiva","Justify Align":"Justificar","Left Align":"Alinear izquierda",Link:"Enlace","Insert Ordered List":"Insertar lista numerada",Redo:"Rehacer","Remove Indent":"Quitar indentación","Remove Formatting":"Quitar formato","Right Align":"Alinear derecha","Strike Through":"Tachar","See code":"Ver código",Subscript:"Subíndice",Superscript:"Superíndice","Insert Unordered List":"Insertar lista",Underline:"Subrayar",Undo:"Deshacer",Unlink:"Quitar enlace","XHTML mode":"Modo XHTML"}}),JaSper.extend(JaSper.prototype,{colorPicker:function(){"use strict";var a=window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",b=JaSper.nodo.crear("div",{class:"JaSper slide wrapper",innerHTML:'<div class="indicator">slide</div>'}),c=JaSper.nodo.crear("div",{class:"JaSper picker wrapper",innerHTML:'<div class="indicator">picker</div>'});if("SVG"==a)JaSper.nodo.crear("div",{},b,[JaSper.nodo.crear("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:"width:100%;height:100%;"},null,[JaSper.nodo.crear("defs",{},null,[JaSper.nodo.crear("linearGradient",{id:"gradient-hsv",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},null,[JaSper.nodo.crear("stop",{offset:"0%","stop-color":"#FF0000","stop-opacity":"1"},null,[],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("stop",{offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"},null,[],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("stop",{offset:"25%","stop-color":"#8000FF","stop-opacity":"1"},null,[],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("stop",{offset:"38%","stop-color":"#0040FF","stop-opacity":"1"},null,[],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("stop",{offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"},null,[],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("stop",{offset:"63%","stop-color":"#00FF40","stop-opacity":"1"},null,[],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("stop",{offset:"75%","stop-color":"#0BED00","stop-opacity":"1"},null,[],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("stop",{offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"},null,[],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("stop",{offset:"100%","stop-color":"#FF0000","stop-opacity":"1"},null,[],"http://www.w3.org/2000/svg")],"http://www.w3.org/2000/svg")],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-hsv)"},null,[],"http://www.w3.org/2000/svg")],"http://www.w3.org/2000/svg")]),JaSper.nodo.crear("div",{},c,[JaSper.nodo.crear("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:"width:100%;height:100%;"},null,[JaSper.nodo.crear("defs",{},null,[JaSper.nodo.crear("linearGradient",{id:"gradient-black",x1:"0%",y1:"100%",x2:"100%",y2:"100%"},null,[JaSper.nodo.crear("stop",{offset:"0%","stop-color":"#000000","stop-opacity":"1"},null,[],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"},null,[],"http://www.w3.org/2000/svg")],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("linearGradient",{id:"gradient-white",x1:"0%",y1:"100%",x2:"100%",y2:"100%"},null,[JaSper.nodo.crear("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"},null,[],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"},null,[],"http://www.w3.org/2000/svg")],"http://www.w3.org/2000/svg")],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-white)"},null,[],"http://www.w3.org/2000/svg"),JaSper.nodo.crear("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-black)"},null,[],"http://www.w3.org/2000/svg")],"http://www.w3.org/2000/svg")]);else{if("VML"!=a)return JaSper.log("[JaSper::rtb.colorPicker] No se puede construir.",1),!1;document.namespaces.vml||document.namespaces.add("vml","urn:schemas-microsoft-com:vml","#default#VML"),JaSper.nodo.crear("div",{},b,[JaSper.nodo.crear("div",{innerHTML:'<vml:rect style="position:absolute;top:0;left:0;width:100%;height:100%" stroked="f" filled="t"><vml:fill type="gradient" method="none" angle="0" color="red" color2="red" colors="8519f fuchsia;.25 #8000ff;24903f #0040ff;.5 aqua;41287f #00ff40;.75 #0bed00;57671f yellow"></vml:fill></vml:rect>',style:"position:relative;width:100%;height:100%;"})]),JaSper.nodo.crear("div",{},c,[JaSper.nodo.crear("div",{innerHTML:'<vml:rect style="position:absolute;left:-1px;top:-1px;width:101%;height:101%" stroked="f" filled="t"><vml:fill type="gradient" method="none" angle="270" color="#FFFFFF" opacity="100%" color2="#CC9A81" o:opacity2="0%"></vml:fill></vml:rect><vml:rect style="position: absolute; left: 0px; top: 0px; width: 100%; height: 101%" stroked="f" filled="t"><vml:fill type="gradient" method="none" angle="0" color="#000000" opacity="100%" color2="#CC9A81" o:opacity2="0%"></vml:fill></vml:rect>',style:"position:relative;width:100%;height:100%;"})])}this.each(function(){this.parentNode.appendChild(b),this.parentNode.appendChild(c)})},rtb:function(a){"use strict";a=a||{};var b={backColor:{comando:"HiliteColor",css:null,nombre:JaSper._t("Background Color"),tags:[],tecla:""},bold:{comando:"Bold",css:{"font-weight":"bold"},nombre:JaSper._t("Bold"),tags:["B","STRONG"],tecla:"b"},center:{comando:"JustifyCenter",css:null,nombre:JaSper._t("Center Align"),tags:[],tecla:""},fontSize:{comando:"FontSize",css:null,nombre:JaSper._t("Font Size"),tags:[],tecla:""},fontFamily:{comando:"FontName",css:null,nombre:JaSper._t("Font Family"),tags:[],tecla:""},fontFormat:{comando:!1,css:null,nombre:JaSper._t("Font Format"),tags:[],tecla:""},foreColor:{comando:"ForeColor",css:null,nombre:JaSper._t("Foreground Color"),tags:[],tecla:""},hr:{comando:"InsertHorizontalRule",css:null,nombre:JaSper._t("Horizontal Rule"),tags:[],tecla:""},image:{comando:"InsertImage",css:null,nombre:JaSper._t("Image"),tags:!1,tecla:""},indent:{comando:"Indent",css:null,nombre:JaSper._t("Indent Text"),tags:[],tecla:""},italic:{comando:"Italic",css:{"font-style":"italic"},nombre:JaSper._t("Italic"),tags:["EM","I"],tecla:"i"},justify:{comando:"JustifyFull",css:null,nombre:JaSper._t("Justify Align"),tags:[],tecla:""},left:{comando:"JustifyLeft",css:null,nombre:JaSper._t("Left Align"),tags:[],tecla:""},link:{comando:!1,css:null,nombre:JaSper._t("Link"),tags:[],tecla:""},ol:{comando:"InsertOrderedList",css:null,nombre:JaSper._t("Insert Ordered List"),tags:["OL"],tecla:""},outdent:{comando:"Outdent",css:null,nombre:JaSper._t("Remove Indent"),tags:[],tecla:""},redo:{comando:"Redo",css:null,nombre:JaSper._t("Redo"),tags:[],tecla:""},removeFormat:{comando:"RemoveFormat",css:null,nombre:JaSper._t("Remove Formatting"),tags:[],tecla:""},right:{comando:"Justifyright",css:null,nombre:JaSper._t("Right Align"),tags:[],tecla:""},strikeThrough:{comando:"StrikeThrough",css:{"text-decoration":"line-through"},nombre:JaSper._t("Strike Through"),tags:[],tecla:""},subscript:{comando:"Subscript",css:null,nombre:JaSper._t("Subscript"),tags:["SUB"],tecla:""},superscript:{comando:"Superscript",css:null,nombre:JaSper._t("Superscript"),tags:["SUP"],tecla:""},ul:{comando:"InsertUnorderedList",css:null,nombre:JaSper._t("Insert Unordered List"),tags:["UL"],tecla:""},underline:{comando:"Underline",css:{"text-decoration":"underline"},nombre:JaSper._t("Underline"),tags:["U"],tecla:"u"},undo:{comando:"Undo",css:null,nombre:JaSper._t("Undo"),tags:[],tecla:""},unlink:{comando:!1,css:null,nombre:JaSper._t("Unlink"),tags:[],tecla:""},verCodigo:{comando:"f:JaSper.rtb.verCodigo",css:null,nombre:JaSper._t("See code"),tags:[],tecla:""},xhtml:{comando:!1,css:null,nombre:JaSper._t("XHTML mode"),tags:[],tecla:""}},c=a.botones||["bold","italic","underline","left","center","right","justify","ol","ul","fontSize","fontFamily","fontFormat","indent","outdent","image","link","unlink","foreColor","backColor","undo","redo","removeFormat","verCodigo"];this.each(function(){if(!this.id)return JaSper.log("[JaSper::rtb] No se soportan elementos sin ID.",1),!1;var a=this,d=a.tagName?a.tagName.toLowerCase():"",e=a.type?a.type.toLowerCase():"",f="input"==d&&"text"==e?"value":"textarea"==d&&"textarea"==e&&"value";if(!f)return void JaSper.log("[JaSper::rtb] No se soportan elementos ["+this.toString()+"].",0);var g=JaSper.css.getStyle("width",this)||this.clientWidth,h=JaSper.css.getStyle("height",this)||this.clientHeight;this.style.display="none";var i=JaSper.nodo.crear("div",{id:this.id+"_rtb",className:"JaSper_rtb contenedor"});i.style.width=g+"px",i.style.minHeight=h+"px";var j=JaSper.nodo.crear("div",{id:this.id+"_rtb_div",className:"JaSper_rtb editable"});if(!(j.contentEditable="true")&&!(window.document.designMode="on"))return JaSper.log("[JaSper::rtb] No se puede poner el elemento ["+j.id+"] en modo editable.",1),!1;j.style.height=h-18+"px",j.innerHTML=this[f],j.innerHTML=""==j.innerHTML?"<br />":j.innerHTML,j.spellcheck||!1,j.styleWithCSS=!1;for(var k=JaSper.nodo.crear("div",{innerHTML:"",className:"JaSper_rtb toolbar"}),l=0;l<c.length;l++){var m=b[c[l]];if(m.comando){var n='<div class="JaSper_rtb button '+c[l]+'" title="'+m.nombre+'" ';n+=m.comando.indexOf("f:")!==-1?"onmousedown=\"JaSper.rtb.command('"+j.id+"', "+m.comando.substr(2)+', null);return false;">':"onmousedown=\"JaSper.rtb.command('"+j.id+"', '"+m.comando+"', null);return false;\">",n+=m.tecla||"&nbsp;",n+="</div>",k.innerHTML+=n}}i.appendChild(k),i.appendChild(j),JaSper.event.add(j,"blur",function(){a[f]=this.innerHTML}),JaSper.event.add(a,"blur",function(){j.innerHTML=a[f]}),this.parentNode.insertBefore(i,this.nextSibling),i.insertBefore(this,k.nextSibling)})}}),JaSper.rtb={command:function(a,b,c){"use strict";if(c=c||null,"function"==typeof b)b.call(document.getElementById(a));else try{return document.execCommand(b,!1,c)}catch(c){return JaSper.log("[JaSper::rtb.command] No se puede ejecutar el comando ["+b+"] en el elemento ["+a+"].",1),!1}},seleccion:function(a,b,c,d){"use strict";var e=window.getSelection();if(a){var f=document.createRange();x=a.compareDocumentPosition(b),4==x||0==x&&c<d?(f.setStart(a,c),f.setEnd(b,d)):(f.setStart(b,d),f.setEnd(a,c)),e.removeAllRanges(),e.addRange(f)}else var a=e.anchorNode,b=e.focusNode,c=e.anchorOffset,d=e.focusOffset;return{nodoIni:a,nodoFin:b,selIni:c,selFin:d}},verCodigo:function(){"use strict";var a=document.getElementById(this.id.substr(0,this.id.indexOf("_rtb_div"))),b=a.style.display,c=a.tagName?a.tagName.toLowerCase():"",d=a.type?a.type.toLowerCase():"",e="input"==c&&"text"==d?"value":"textarea"==c&&"textarea"==d&&"value";"none"==b?(a[e]=this.innerHTML,this.style.display=a.style.display,a.style.display="block"):(this.innerHTML=a[e],a.style.display=this.style.display,this.style.display="block")}},function(){function a(a,b){do if(3==a.nodeType){var c=a.nodeValue;if(!(b.length>0&&0===b.indexOf(c)&&b!==c))return{node:a,offset:b.length};b=b.substring(c.length)}else if(1===a.nodeType){var d=document.body.createTextRange();d.moveToElementText(a),b=b.substring(d.text.length)}while(a=a.nextSibling);return null}function b(b,c){if(!b)return null;var d=b.duplicate(),e=b.duplicate();d.collapse(c);var f=d.parentElement();return f instanceof HTMLInputElement?null:(e.moveToElementText(f),e.setEndPoint("EndToEnd",d),a(f.firstChild,e.text))}function c(){var a=window.document.selection.createRange(),c=b(a,!0),d=b(a,!1);return c&&d?{commonAncestorContainer:a.parentElement(),startContainer:c.node,startOffset:c.offset,endContainer:d.node,endOffset:d.offset}:null}!window.getSelection&&window.document.selection&&(window.getSelection=function(){var a=c();return{rangeCount:a?1:0,getRangeAt:function(){return a}}})}();
