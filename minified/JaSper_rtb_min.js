/*! JaSper v3.4 | (c) 2015 José M. Carnero (sargazos.net) | JaSper_rtb v1.0 */
"use strict";JaSper.extend(JaSper.langs,{es:{"Background Color":"Color de fondo",Bold:"Negrita","Center Align":"Centrado","Font Size":"Tamaño de fuente","Font Family":"Fuente","Font Format":"Formato de fuente","Foreground Color":"Color","Horizontal Rule":"Línea horizontal","See HTML":"Ver HTML",Image:"Imagen","Indent Text":"Indentar",Italic:"Cursiva","Justify Align":"Justificar","Left Align":"Alinear izquierda",Link:"Enlace","Insert Ordered List":"Insertar lista numerada","Remove Indent":"Quitar indentación","Remove Formatting":"Quitar formato","Right Align":"Alinear derecha","Strike Through":"Tachar",Subscript:"Subíndice",Superscript:"Superíndice","Insert Unordered List":"Insertar lista",Underline:"Subrayar",Unlink:"Quitar enlace"}}),JaSper.extend(JaSper.prototype,{rtb:function(){var e={bgcolor:{comando:!1,css:null,nombre:JaSper._t("Background Color"),tags:[],tecla:""},bold:{comando:"bold",css:{"font-weight":"bold"},nombre:JaSper._t("Bold"),tags:["B","STRONG"],tecla:"b"},center:{comando:"justifycenter",css:null,nombre:JaSper._t("Center Align"),tags:[],tecla:""},fontSize:{comando:!1,css:null,nombre:JaSper._t("Font Size"),tags:[],tecla:""},fontFamily:{comando:!1,css:null,nombre:JaSper._t("Font Family"),tags:[],tecla:""},fontFormat:{comando:!1,css:null,nombre:JaSper._t("Font Format"),tags:[],tecla:""},forecolor:{comando:!1,css:null,nombre:JaSper._t("Foreground Color"),tags:[],tecla:""},hr:{comando:"insertHorizontalRule",css:null,nombre:JaSper._t("Horizontal Rule"),tags:[],tecla:""},html:{comando:!1,css:null,nombre:JaSper._t("See HTML"),tags:[],tecla:""},image:{comando:!1,css:null,nombre:JaSper._t("Image"),tags:!1,tecla:""},indent:{comando:"indent",css:null,nombre:JaSper._t("Indent Text"),tags:[],tecla:""},italic:{comando:"Italic",css:{"font-style":"italic"},nombre:JaSper._t("Italic"),tags:["EM","I"],tecla:"i"},justify:{comando:"justifyfull",css:null,nombre:JaSper._t("Justify Align"),tags:[],tecla:""},left:{comando:"justifyleft",css:null,nombre:JaSper._t("Left Align"),tags:[],tecla:""},link:{comando:!1,css:null,nombre:JaSper._t("Link"),tags:[],tecla:""},ol:{comando:"insertorderedlist",css:null,nombre:JaSper._t("Insert Ordered List"),tags:["OL"],tecla:""},outdent:{comando:"outdent",css:null,nombre:JaSper._t("Remove Indent"),tags:[],tecla:""},removeformat:{comando:"removeformat",css:null,nombre:JaSper._t("Remove Formatting"),tags:[],tecla:""},right:{comando:"justifyright",css:null,nombre:JaSper._t("Right Align"),tags:[],tecla:""},strikethrough:{comando:"strikeThrough",css:{"text-decoration":"line-through"},nombre:JaSper._t("Strike Through"),tags:[],tecla:""},subscript:{comando:"subscript",css:null,nombre:JaSper._t("Subscript"),tags:["SUB"],tecla:""},superscript:{comando:"superscript",css:null,nombre:JaSper._t("Superscript"),tags:["SUP"],tecla:""},ul:{comando:"insertunorderedlist",css:null,nombre:JaSper._t("Insert Unordered List"),tags:["UL"],tecla:""},underline:{comando:"Underline",css:{"text-decoration":"underline"},nombre:JaSper._t("Underline"),tags:["U"],tecla:"u"},unlink:{comando:!1,css:null,nombre:JaSper._t("Unlink"),tags:[],tecla:""}},t=["bold","italic","underline","left","center","right","justify","ol","ul","fontSize","fontFamily","fontFormat","indent","outdent","image","link","unlink","forecolor","bgcolor"];this.each(function(){var n=this,r=n.tagName?n.tagName.toLowerCase():"",a=n.type?n.type.toLowerCase():"",o="input"==r&&"text"==a?"value":"textarea"==r&&"textarea"==a?"value":!1;if(!o)return void JaSper.log("[JaSper::rtb] No se soportan elementos ["+this.toString()+"].",0);var l=JaSper.css.getStyle("width",this)||this.clientWidth,i=JaSper.css.getStyle("height",this)||this.clientHeight;this.style.display="none";var s=JaSper.nodo.crear("div",{id:this.id+"_rtb",className:"JaSper_rtb contenedor"});s.style.width=l+"px",s.style.height=i+"px";var c=JaSper.nodo.crear("div",{id:this.id+"_rtb_div",className:"JaSper_rtb editable"});if(!(c.contentEditable="true")&&!(window.document.designMode="on"))return JaSper.log("[JaSper::rtb] No se puede poner el elemento ["+c.id+"] en modo editable.",1),!1;c.style.height=i-18+"px",c.innerHTML=JaSper.rtb.decode_entities(this[o]),c.innerHTML=""==c.innerHTML?"<br />":c.innerHTML,c.spellcheck||!1,c.styleWithCSS=!1;for(var d=JaSper.nodo.crear("div",{innerHTML:"",className:"JaSper_rtb toolbar"}),m=0;m<t.length;m++){var u=e[t[m]];if(u.comando){var p='<div class="JaSper_rtb button '+t[m]+'" title="'+u.nombre+'" ';p+="onmousedown=\"JaSper.rtb.command('"+c.id+"', '"+u.comando+"', null);return false;\">",p+=u.tecla,p+="</div>",d.innerHTML+=p}}s.appendChild(d),s.appendChild(c),JaSper.event.add(c,"blur",function(){n[o]=this.innerHTML}),this.parentNode.insertBefore(s,this.nextSibling)})}}),JaSper.rtb={},JaSper.extend(JaSper.rtb,{command:function(e,t,n){n=n||null;try{return document.execCommand(t,!1,n)}catch(r){return JaSper.log("[JaSper::rtb.command] No se puede ejecutar el comando ["+t+"] en el elemento ["+e+"].",1),!1}},decode_entities:function(e){var t=e.replace(/&lt;/gi,"<").replace(/&gt;/gi,">");return t}});
