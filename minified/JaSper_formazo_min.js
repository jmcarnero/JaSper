/*! JaSper v3.5 | (c) 2015 José M. Carnero (sargazos.net) | JaSper_formazo v2.1 */
JaSper.extend(JaSper.langs,{en:{"valida/bic":"BIC/SWIFT bank number invalid","valida/clave":"Check that you entered the same password in both boxes","valida/email":"Invalid e-mail","valida/fechas":"Incorrect date.\nRecommended format for your dates: ","valida/fichero":"File type not allowed.","valida/iban":"IBAN bank number invalid","valida/nif1":"NIE wrong.","valida/nif2":"NIF wrong.","valida/numeros1":"Range between ","valida/numeros2":" and ","valida/obligatorio":" can not be empty.","valida/obligatorioRadio":" should have checked some option.","valida/url":'Invalid URL.\nRecommended format: "http://dominio.tld"'},es:{"valida/bic":"Código bancario BIC/SWIFT incorrecto","valida/clave":"Compruebe que ha escrito la misma clave en ambas casillas","valida/email":"e-mail no válido","valida/fechas":"Fecha incorrecta.\nFormato recomendado para las fechas: ","valida/fichero":"Tipo de fichero no permitido.","valida/iban":"Código bancario IBAN incorrecto","valida/nif1":"NIE incorrecto","valida/nif2":"NIF incorrecto","valida/numeros1":"Rango entre ","valida/numeros2":" y ","valida/obligatorio":" no puede estar vacío.","valida/obligatorioRadio":" debe tener marcada alguna opción.","valida/url":'URL no válida.\nFormato recomendado: "http://dominio.tld"'}}),JaSper.extend(JaSper.prototype,{validar:function(a){"use strict";a=a||{},a.clases=a.clases||{},a={preview:a.preview||!1,clases:{error:a.clases.error||"frmError",obligatorio:a.clases.obligatorio||"obligatorio",clave:a.clases.clave||"clave",email:a.clases.email||"email",entero:a.clases.entero||"entero",fichero:a.clases.fichero||"fichero",fecha:a.clases.fecha||"fecha",nif:a.clases.nif||"nif",numerico:a.clases.numerico||"numerico",telefono:a.clases.telefono||"telefono",url:a.clases.url||"url"},fallo:a.fallo||function(a,b){return JaSper.event.preventDefault(a),JaSper.event.stop(a),alert("Se han producido los siguientes errores:\n\n"+b.join("\n")),!1},fin:a.fin||function(a){return!0},inicio:a.inicio||function(a){return!0}};var b={};b[a.clases.obligatorio]=function(a){return JaSper.valida.obligatorio(a)},b[a.clases.clave]=function(a){return JaSper.valida.clave(a,document.getElementById("objId2"))},b[a.clases.email]=function(a){return JaSper.valida.email(a)},b[a.clases.entero]=function(a){return JaSper.valida.numeros(a)},b[a.clases.fichero]=function(a){return JaSper.valida.fichero(a)},b[a.clases.fecha]=function(a){return JaSper.valida.fechas(a)},b[a.clases.nif]=function(a){return JaSper.valida.nif(a)},b[a.clases.numerico]=function(a){return JaSper.valida.numeros(a)},b[a.clases.telefono]=function(a){return JaSper.valida.numeros(a)},b[a.clases.url]=function(a){return JaSper.valida.url(a)};var c={};return c[a.clases.entero]=function(a,b){return JaSper.valida.teclasNumeros(b,a,!1)},c[a.clases.fecha]=function(a,b){return JaSper.valida.teclasFechas(b,a)},c[a.clases.numerico]=function(a,b){return JaSper.valida.teclasNumeros(b,a,!0)},this.each(function(){JaSper("<input>,<textarea>",this).each(function(a){var b=this;if("undefined"!=b.className)for(var d=b.className.split(" "),e=0;e<d.length;e++)if(JaSper.funcs.isFunction(c[d[e]])){var f=d[e];JaSper.event.add(b,"keydown",function(a){if(c[f](a,b))return JaSper.event.preventDefault(a),JaSper.event.stop(a),!1})}}),JaSper('select[multiple="multiple"]',this).eventAdd("mousedown",function(a){if(!a.ctrlKey){for(var b=[],c=0;c<this.options.length;c++)b[c]=this.options[c].selected;JaSper(this).eventAdd("mouseup",function a(c){for(var d=0;d<this.options.length;d++)this.options[d].selected=this.options[d].selected?!b[d]:b[d];JaSper(this).eventRemove("mouseup",a)})}}),a.preview&&JaSper('input[type="file"]',this).each(function(){var a=this.dataset.previewId||this.getAttribute("data-previewId")||null;return!!a&&(a="#"+a,void JaSper(this).eventAdd("change",function(){if("function"!=typeof FileReader)return JaSper.log("Vista previa no disponible",0),!1;var b=function(b){return b.replace(/data:([^;]+).*/,"$1")},c=this,d=c.files;if(d.length>0){var e=new FileReader;e.onloadend=function(d){var e=d.target,f=b(e.result.substring(0,30));"image/jpeg"!==f&&"image/png"!==f&&"image/gif"!==f?(JaSper(a).attrib("src",""),c.value="",JaSper.log("No se puede mostrar preview del fichero seleccionado",1)):JaSper(a).attrib("src",e.result)},e.onerror=function(a){JaSper.log(a,2)},e.readAsDataURL(d[0])}else JaSper(a).attrib("src","")}))})}),this.eventAdd("submit",function(c){if(a.inicio(c),JaSper.aFormErrMens=[],"undefined"!=typeof b){JaSper("<input>,<textarea>,<select>",this).each(function(c){var d=this;if("undefined"!=d.className){for(var e=d.className.split(" "),f=[],g=0;g<e.length;g++)if(JaSper.funcs.isFunction(b[e[g]])){var h=b[e[g]](d);h!==!1&&(f[f.length]=b[e[g]](d))}f.length?(JaSper.css.addClass(d,a.clases.error),JaSper.aFormErrMens[JaSper.aFormErrMens.length]=f.join("\n")):JaSper.css.removeClass(d,a.clases.error)}});var d=JaSper("."+a.clases.error,this).length;return d>0?a.fallo(c,JaSper.aFormErrMens):a.fin(c)}}),this}}),JaSper.valida={bic:function(a){"use strict";var b=!0;return a.value=a.value.toString().trim()||"",a.value||(b=!1),/^[a-z]{6}[0-9a-z]{2}([0-9a-z]{3})?$/i.test(a.value)||(b=!1),!b&&JaSper._t("valida/bic")},clave:function(a,b){"use strict";if(!b)return!1;var c=!0;return a||""==b.value||a==b.value||(c=!1),!c&&JaSper._t("valida/clave")},email:function(a){"use strict";var b=!0,c=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return a.value=a.value.toString().trim()||"",""!=a.value&&(b=!!c.test(a.value)),!b&&JaSper._t("valida/email")},fechas:function(a,b){"use strict";b||(b="aaaa-mm-dd hh:mm:ss");var c=!1;if(a.value=a.value.toString().trim()||"",""!=a.value){var d=Date.parse(a.value.replace(/-/g,"/"));if(!isNaN(d)){var e=new Date;e.setTime(d),"Invalid Date"!=e&&(c=!0)}}return!c&&JaSper._t("valida/fechas")+b},fichero:function(a,b){"use strict";var c=!0;if(a.value=a.value.toString().trim()||"",""!=a.value){var d=new Array;d=a.value.split("."),c=b.indexOf(d[d.length-1].toLowerCase())>=0}return!c&&JaSper._t("valida/fichero")},iban:function(a){"use strict";var b=!0;if(a.value=a.value.toString().trim()||"",""!=a.value){var h,i,j,k,l,m,c=a.value.replace(/[^a-zA-Z0-9]/gim,"").toUpperCase(),d="",e=!0,f="",g="",n=c.substring(0,2),o={AD:"\\d{8}[\\dA-Z]{12}",AE:"\\d{3}\\d{16}",AL:"\\d{8}[\\dA-Z]{16}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BA:"\\d{16}",BE:"\\d{12}",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",BH:"[A-Z]{4}[\\dA-Z]{14}",BR:"\\d{23}[A-Z][\\dA-Z]",CH:"\\d{5}[\\dA-Z]{12}",CR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DE:"\\d{18}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",ES:"\\d{20}",FI:"\\d{14}",FO:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GB:"[A-Z]{4}\\d{14}",GE:"[\\dA-Z]{2}\\d{16}",GI:"[A-Z]{4}[\\dA-Z]{15}",GL:"\\d{14}",GR:"\\d{7}[\\dA-Z]{16}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HR:"\\d{17}",HU:"\\d{24}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IS:"\\d{22}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KW:"[A-Z]{4}[\\dA-Z]{22}",KZ:"\\d{3}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",LV:"[A-Z]{4}[\\dA-Z]{13}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MR:"\\d{23}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PL:"\\d{24}",PS:"[\\dA-Z]{4}\\d{21}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",RS:"\\d{18}",SA:"\\d{2}[\\dA-Z]{18}",SE:"\\d{20}",SI:"\\d{15}",SK:"\\d{20}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",VG:"[\\dA-Z]{4}\\d{16}"},p=o[n];for("undefined"==typeof p&&(b=!1),k=new RegExp("^[A-Z]{2}\\d{2}"+p+"$",""),k.test(c)||(b=!1),h=c.substring(4,c.length)+c.substring(0,4),l=0;l<h.length;l++)i=h.charAt(l),"0"!==i&&(e=!1),e||(d+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(i));for(m=0;m<d.length;m++)j=d.charAt(m),g=""+f+j,f=g%97;b=1===f}return!b&&JaSper._t("valida/iban")},nif:function(a){"use strict";var b=!0,c="";if(a.value=(a.value.toString().trim()||"").toUpperCase(),""!=a.value)if(dni=a.value.substr(0,a.value.length-1),"X"==a.value.charAt(0)&&(dni=dni.substr(1)),letra=a.value.charAt(sNif.length-1),8==dni.length&&isNaN(letra)){var d="TRWAGMYFPDXBNJZSQVHLCKE";pos=dni%23,d=d.charAt(pos),d==letra&&(b=!0)}else c+="X"==a.value.charAt(0)?JaSper._t("valida/nif1"):JaSper._t("valida/nif2"),b=!1;return!b&&c},numeros:function(a,b,c){"use strict";var d=!0;if(a.value=a.value.toString().trim()||"",""!=a.value){"undefined"==typeof b&&(b=0),"undefined"==typeof c&&(c=Math.pow(10,a.maxLength));var e=parseInt(a.value);d=e>=b&&e<=c||""==a}return!d&&JaSper._t("valida/numeros1")+b+JaSper._t("valida/numeros2")+c},obligatorio:function(a){"use strict";var b=!0,c="";try{a.value=a.value.toString().trim()||""}catch(b){JaSper.log("No se puede alterar el valor de <"+a.tagName+' id="'+a.id+'" type="'+a.type+'" />',1)}return""!=a.value?b=!0:(c=JaSper("<label>",a.parentNode).text(),b=!1),!b&&'"'+c+'"'+JaSper._t("valida/obligatorio")},obligatorioRadio:function(a){"use strict";for(var b=!0,c=-1,d=a,e=d.length-1;e>-1;e--)d[e].checked&&(c=e,e=-1);return c>-1?b=!0:(text=JaSper("<label>",a.parentNode).text(),b=!1),!b&&'"'+text+'"'+JaSper._t("valida/obligatorioRadio")},teclasFechas:function(a,b){"use strict";var c=!1;b=b||window.event;var d=JaSper.event.keyCode(b);return d>31&&(d<48||d>58)&&32!=d&&47!=d&&45!=d?(c=!0,JaSper.event.preventDefault(b)):(c=!1,a.value.indexOf(" ")!=-1&&32==d&&(c=!0)),c},teclasNumeros:function(a,b,c){"use strict";var d=!1;b=b||window.event,c="undefined"==typeof c||c;var e=JaSper.event.keyCode(b);return c?e>31&&(e<48||e>57)&&46!=e?(d=!0,JaSper.event.preventDefault(b)):(d=!1,a.value.indexOf(".")!=-1&&46==e&&(d=!0)):e>31&&(e<48||e>57)?(d=!1,JaSper.event.preventDefault(b)):d=!1,d},url:function(a){"use strict";var b=!0,c=/(((ht|f)tp(s?):\/\/)|(www\.[^ [\]()\n\r\t]+)|(([012]?[0-9]{1,2}\.){3}[012]?[0-9]{1,2})\/)([^ [\](),;"'<>\n\r\t]+)([^. [\](),;"'<>\n\r\t])|(([012]?[0-9]{1,2}\.){3}[012]?[0-9]{1,2})/;return a.value=a.value.toString().trim()||"",""!=a.value&&(b=!!c.test(this.nodes[i].value)),!b&&JaSper._t("valida/url")}};
