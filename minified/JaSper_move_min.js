/*! JaSper v3.4 | (c) 2015 Jos√© M. Carnero (sargazos.net) | JaSper_move v2.3 */
"use strict";JaSper.extend(JaSper.prototype,{move:function(e){e=e||{},e.container=e.container||!1,e.reset=void 0==e.reset?!0:e.reset,e.shadow=e.shadow||!1,e.restrict=e.restrict||!1,e.onMove=e.onMove||!1,e.onMoveEnd=e.onMoveEnd||!1,e.onMoveStart=e.onMoveStart||!1;var t,o={inicio:JaSper.tactil?"touchstart":"mousedown",mueve:JaSper.tactil?"touchmove":"mousemove",fin:JaSper.tactil?"touchend":"mouseup"},n=function(e){return t=JaSper.nodo.crear(e.tagName,{innerHTML:"&nbsp","class":e.className+" JaSper_shadow"}),t.style.position=e.posStyle,t.style.top=e.offsetTop,t.style.left=e.offsetLeft,t.style.height=e.clientHeight,t.style.width=e.clientWidth,t.style.border="1px dashed black",t.style.backgroundColor="#CACACA",e.parentNode.insertBefore(t,e.nextSibling),t},r=function(n,r,a){if(JaSper.event.preventDefault(n),JaSper.event.stop(n),e.reset){var s=JaSper.nodo.extend(r);r.style.left=s.posMoveStart.x-s.posMoveStart.mx+"px",r.style.top=s.posMoveStart.y-s.posMoveStart.my+"px",r.style.position=r.posStyle}if(e.shadow&&(e.reset||(r.style.position=r.posStyle,r=r.parentNode.removeChild(r),t.parentNode.insertBefore(r,t)),t.parentNode.removeChild(t)),r.style.zIndex-=10,JaSper.event.remove(document,o.mueve,a[0]),JaSper.event.remove(document,o.fin,a[1]),"function"==typeof e.onMoveEnd){var p=r.style.zIndex;r.style.zIndex=-999;var i=JaSper.move.elementFromPoint(n);r.style.zIndex=p,e.onMoveEnd.call(r,n,i)}},a=function(o,n){JaSper.event.preventDefault(o),JaSper.event.stop(o);var r=JaSper.move.posPuntero(o),a=null,s=null;if(e.shadow){t=t.parentNode.removeChild(t),s=s||n.style.zIndex,n.style.zIndex=-999,a=a||JaSper.move.elementFromPoint(o),n.style.zIndex=s;var p=JaSper.move.posObject(a),i=Math.round(p.h/2);r.y<p.y+i?a.parentNode.insertBefore(t,a):r.y>p.y2-i&&a.nextSibling?a.parentNode.insertBefore(t,a.nextSibling):a.parentNode.appendChild(t)}"function"==typeof e.onMove&&(s=s||n.style.zIndex,n.style.zIndex=-999,a=a||JaSper.move.elementFromPoint(o),n.style.zIndex=s,e.onMove.call(n,o,a));var l=JaSper.nodo.extend(n),d=l.posMoveStart.y+("x"==e.restrict?0:r.y-l.posPunteroInicial.y-l.posMoveStart.my),v=l.posMoveStart.x+("y"==e.restrict?0:r.x-l.posPunteroInicial.x-l.posMoveStart.mx);if(e.container){var c=l.posMoveStart.y2,S=l.posMoveStart.x2;d<l.posMoveStartParent.y&&(d=l.posMoveStartParent.y),v<l.posMoveStartParent.x&&(v=l.posMoveStartParent.x),c>l.posMoveStartParent.y2&&(d=l.posMoveStartParent.y2-l.posMoveStart.h),S>l.posMoveStartParent.x2&&(v=l.posMoveStartParent.x2-l.posMoveStart.w)}n.style.top=d+"px",n.style.left=v+"px",$("origen").html=JaSper.event.source(o),$("evento").html=JaSper.event.name(o)},s=function(t,s){JaSper.event.preventDefault(t),JaSper.event.stop(t);var p=1;if(t.which?p=t.which:t.button&&(p=t.button),1!=p)return!1;if("function"==typeof e.onMoveStart){var i=s.style.zIndex;s.style.zIndex=-999;var l=JaSper.move.elementFromPoint(t);s.style.zIndex=i,e.onMoveStart.call(s,t,l)}e.shadow&&n(s),JaSper.nodo.extend(s,{posMoveStart:JaSper.move.posObject(s)});var d=JaSper.nodo.extend(s,{posPunteroInicial:JaSper.move.posPuntero(t)});e.container&&(d=JaSper.nodo.extend(s,{posMoveStartParent:JaSper.move.posObject(e.container===!0?s.parentNode:e.container)}),s.parentNode.style.top=d.posMoveStartParent.y+"px",s.parentNode.style.left=d.posMoveStartParent.x+"px",s.parentNode.style.width=d.posMoveStartParent.w+"px",s.parentNode.style.height=d.posMoveStartParent.h+"px"),s.posStyle=s.style.position,s.style.position="absolute",s.style.top=d.posMoveStart.y-d.posMoveStart.my+"px",s.style.left=d.posMoveStart.x-d.posMoveStart.mx+"px",s.style.width=d.posMoveStart.w+"px",s.style.height=d.posMoveStart.h+"px",s.style.zIndex+=10;var v=function(e){a(e,s)},c=function S(e){r(e,s,[v,S])};JaSper.event.add(document,o.mueve,v),JaSper.event.add(document,o.fin,c)};this.eventAdd(o.inicio,function(e){s(e,this)})}}),JaSper.move={},JaSper.extend(JaSper.move,{elementFromPoint:function(e){if(document.elementFromPoint){var t=e.clientX,o=e.clientY,n=!0,r=0;return(r=JaSper.css.getStyle(document,"scrollTop"))>0?n=null==document.elementFromPoint(0,r+JaSper.css.getStyle(window,"height")):(r=JaSper.css.getStyle(document,"scrollLeft"))>0&&(n=null==document.elementFromPoint(r+JaSper.css.getStyle(window,"width"),0)),n||(t+=JaSper.css.getStyle(document,"scrollLeft"),o+=JaSper.css.getStyle(document,"scrollTop")),document.elementFromPoint(t,o)}return function(e){var t=e.explicitOriginalTarget;return t?(t.nodeType==Node.TEXT_NODE&&(t=t.parentNode),"HTML"==t.nodeName.toUpperCase()&&(t=document.getElementsByTagName("BODY").item(0)),t):null}(e)},posObject:function(e){for(var t=e,o=e.offsetLeft,n=e.offsetTop;t=t.offsetParent;)o+=t.offsetLeft,n+=t.offsetTop;var r=new Array;return r.w=parseInt(JaSper.css.getStyle(e,"width")),r.h=parseInt(JaSper.css.getStyle(e,"height")),r.x=o,r.y=n,r.x2=r.x+r.w,r.y2=r.y+r.h,r.mx=parseInt(JaSper.css.getStyle(e,"marginLeft")),r.my=parseInt(JaSper.css.getStyle(e,"marginTop")),r},posPuntero:function(e){var t=new Array;return JaSper.tactil?(t.x=e.changedTouches[0].pageX,t.y=e.changedTouches[0].pageY):navigator.userAgent.toLowerCase().indexOf("msie")>=0?(t.x=window.event.clientX+document.body.clientLeft+document.body.scrollLeft,t.y=window.event.clientY+document.body.clientTop+document.body.scrollTop):(t.x=e.clientX+window.pageXOffset,t.y=e.clientY+window.pageYOffset),t}});