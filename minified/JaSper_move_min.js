/*! JaSper v3.2b | (c) 2015 Jos√© M. Carnero (sargazos.net) | JaSper_move */
"use strict";JaSper.extend(JaSper.prototype,{move:function(e){if("object"!=typeof e)var e={};e.container=e.container||!1,e.reset=void 0==e.reset?!0:e.reset,e.place=e.place||!1,e.shadow=e.shadow||!1,e.restrict=e.restrict||!1,e.onMove=e.onMove||!1,e.onMoveEnd=e.onMoveEnd||!1,e.onMoveStart=e.onMoveStart||!1;var t,o=function(e){return t=document.createElement(e.tagName),t.id="JaSper_shadow",t.innerHTML="&nbsp",t.style=e.style,t.className=e.className+" JaSper_shadow",t.style.border="1px dashed black",t.style.backgroundColor="#CACACA",e.parentNode.insertBefore(t,e.nextSibling),t},n=function(o,n,r){JaSper.event.preventDefault(o),JaSper.event.stop(o),e.reset&&(n.style.left=n.posMoveStart.x+"px",n.style.top=n.posMoveStart.y+"px",n.style.position=n.posStyle),e.shadow&&t.parentNode.removeChild(t),n.style.zIndex-=10,JaSper.event.remove(document,"mousemove",r[0]),JaSper.event.remove(document,"mouseup",r[1]),"function"==typeof e.onMoveEnd&&e.onMoveEnd.call(n)},r=function(t,o){JaSper.event.preventDefault(t),JaSper.event.stop(t),"function"==typeof e.onMove&&e.onMove.call(o);var n=p(t),r=o.posMoveStart.y+("x"==e.restrict?0:n.y-o.posMouseInicial.y),a=o.posMoveStart.x+("y"==e.restrict?0:n.x-o.posMouseInicial.x);if(e.container){var s=r+o.posMoveStart.h,v=a+o.posMoveStart.w;r<o.posMoveStartParent.y&&(r=o.posMoveStartParent.y),a<o.posMoveStartParent.x&&(a=o.posMoveStartParent.x),s>o.posMoveStartParent.y2&&(r=o.posMoveStartParent.y2-o.posMoveStart.h),v>o.posMoveStartParent.x2&&(a=o.posMoveStartParent.x2-o.posMoveStart.w)}o.style.top=r+"px",o.style.left=a+"px",$("origen").html=JaSper.event.source(t),$("evento").html=JaSper.event.name(t)},a=function(t,a){JaSper.event.preventDefault(t),JaSper.event.stop(t);var v;if(t.which?v=t.which:t.button&&(v=t.button),1!=v)return!1;"function"==typeof e.onMoveStart&&e.onMoveStart.call(a),e.shadow&&o(a),a.posMoveStart=s(a),a.posMouseInicial=p(t),e.container&&(a.posMoveStartParent=s(a.parentNode),a.parentNode.style.top=a.posMoveStartParent.y+"px",a.parentNode.style.left=a.posMoveStartParent.x+"px",a.parentNode.style.width=a.posMoveStartParent.w+"px",a.parentNode.style.height=a.posMoveStartParent.h+"px"),a.posStyle=a.style.position,a.style.position="absolute",a.style.top=a.posMoveStart.y+"px",a.style.left=a.posMoveStart.x+"px",a.style.width=a.posMoveStart.w+"px",a.style.height=a.posMoveStart.h+"px",a.style.zIndex+=10;var i=function(e){r(e,a)},l=function c(e){n(e,a,[i,c])};JaSper.event.add(document,"mousemove",i),JaSper.event.add(document,"mouseup",l)},s=function(e){for(var t=parseInt(JaSper.css.getStyle(e,"marginLeft")),o=parseInt(JaSper.css.getStyle(e,"marginTop")),n=e,r=e.offsetLeft-t,a=e.offsetTop-o;n=n.offsetParent;)r+=n.offsetLeft,a+=n.offsetTop;var s=new Array;return s.w=parseInt(JaSper.css.getStyle(e,"width")),s.h=parseInt(JaSper.css.getStyle(e,"height")),s.x=r,s.y=a,s.x2=s.x+s.w,s.y2=s.y+s.h,s},p=function(e){var t=new Array;return navigator.userAgent.toLowerCase().indexOf("msie")>=0?(t.x=window.event.clientX+document.body.clientLeft+document.body.scrollLeft,t.y=window.event.clientY+document.body.clientTop+document.body.scrollTop):(t.x=e.clientX+window.pageXOffset,t.y=e.clientY+window.pageYOffset),t};this.eventAdd("mousedown",function(e){a(e,this)})}});