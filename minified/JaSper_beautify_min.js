/*! JaSper v3.5 | (c) 2015 Jos√© M. Carnero (sargazos.net) | JaSper_beautify v0.9b */
JaSper.extend(JaSper.prototype,{beautify:function(a){"use strict";return a=a||{},a.formato=a.formato||"plano",this.each(function(){this.innerHTML=JaSper.beautify.format(this.innerHTML,a.formato)}),this}}),JaSper.beautify={format:function(a,b){"use strict";a=a||"",b=(b||"").toLowerCase();var c=a;switch(b){case"md":c=JaSper.beautify.md(a);break;default:b="plano"}return c},md:function(a){function f(a){var b="",c=e[e.length-1]||"";return"ol"==a&&"ol"!=c?(b="<ol>",e.push("ol")):"ul"==a&&"ul"!=c?(b="<ul>",e.push("ul")):a||"ol"!=c&&"ul"!=c||(b="</"+e.pop()+">"),b}for(var b="",c={block:{h6:"###### (.*?)#*$",h5:"##### (.*?)#*$",h4:"#### (.*?)#*$",h3:"### (.*?)#*$",h2:"## (.*?)#*$",h1:"# (.*?)#*$",ul:["[*|+|-] (.*?)$","<ul>$1"],ol:["\\d+\\. (.*?)$","<ol>$1"]},inline:{strong:["\\*\\*(.+?)\\*\\*|__(.+?)__","<strong>$1$2</strong>"],em:"\\*(.+?)\\*|_(.+?)_",code:"`(?!`)(.+?)`"}},d=JaSper.beautify.tokenizer(a,c),e=[],g=0,h=d.length;g<h;g++)d[g]&&(0==d[g].indexOf("<ol>")?d[g]=f("ol")+d[g].replace("<ol>","<li>")+"</li>":0==d[g].indexOf("<ul>")?d[g]=f("ul")+d[g].replace("<ul>","<li>")+"</li>":0==d[g].indexOf("\v")?d[g]=f()+"<p>"+d[g].replace("\v","")+"</p>":d[g]=f()+d[g],b+=d[g]);return b},tokenizer:function(a,b){var c=a||"";if(b){b=b||{},b.block=b.block||{},b.inline=b.inline||{};var d=[],e=0,f="";for(var g in b.inline){if(d=JaSper.funcs.isArray(b.inline[g])?b.inline[g]:[b.inline[g],"<"+g+">\v</"+g+">"],d[0]=new RegExp(d[0],"g"),d[1].indexOf("\v")>-1){e=(d[0].source.match(/\(/g)||[]).length,e||(d[0]="("+d[0]+")",e=1),f="";for(var h=1;h<=e;h++)f+="$"+h;d[1]=d[1].replace("\v",f)}c=c.replace(d[0],d[1])}for(var g in b.block)b.block[g]=JaSper.funcs.isArray(b.block[g])?b.block[g]:[b.block[g],"<"+g+">\v</"+g+">"],b.block[g][0]=new RegExp(b.block[g][0],"g");for(var i=c.split("\n"),j=0,k=i.length;j<k;j++)if(i[j]){d=[];for(var g in b.block)if(b.block[g][0].test(i[j])){d=b.block[g];break}if(d.length){if(d[1].indexOf("\v")>-1){e=(d[0].source.match(/\(/g)||[]).length,e||(d[0]="("+d[0]+")",e=1),f="";for(var h=1;h<=e;h++)f+="$"+h;d[1]=d[1].replace("\v",f)}i[j]=i[j].replace(d[0],d[1])}else i[j]="\v"+i[j]}}return i}};
